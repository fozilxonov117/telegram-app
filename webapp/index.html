<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–°–∏—Å—Ç–µ–º–∞ –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç–∏</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <!-- Loader -->
    <div id="loader" class="loader">
        <div class="spinner"></div>
        <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
    </div>

    <!-- Main Container -->
    <div id="app" class="app-container" style="display: none;">
        
        <!-- Header -->
        <header class="header">
            <button id="backBtn" class="back-btn" style="display: none;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <h1 id="headerTitle">–°–∏—Å—Ç–µ–º–∞ –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç–∏</h1>
            <div class="header-spacer"></div>
        </header>

        <!-- Content -->
        <main class="content">
            
            <!-- Screen: Start -->
            <div id="screenStart" class="screen active">
                <div class="welcome-section">
                    <div class="welcome-icon">üìä</div>
                    <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
                    <p>–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ—Ç—á—ë—Ç–∞–º–∏</p>
                </div>
                
                <div class="action-cards">
                    <button class="action-card" onclick="showScreen('screenScope', 'download')">
                        <div class="card-icon">üì•</div>
                        <div class="card-content">
                            <h3>–ü–æ–ª—É—á–∏—Ç—å –æ—Ç—á—ë—Ç</h3>
                            <p>–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–∫–∞—á–∞—Ç—å –æ—Ç—á—ë—Ç</p>
                        </div>
                        <div class="card-arrow">‚Ä∫</div>
                    </button>
                    
                    <button class="action-card" onclick="showScreen('screenUpload', 'upload')">
                        <div class="card-icon">üì§</div>
                        <div class="card-content">
                            <h3>–ó–∞–≥—Ä—É–∑–∏—Ç—å –æ—Ç—á—ë—Ç</h3>
                            <p>–ó–∞–≥—Ä—É–∑–∏—Ç—å –≥–æ—Ç–æ–≤—ã–π XLSX —Ñ–∞–π–ª</p>
                        </div>
                        <div class="card-arrow">‚Ä∫</div>
                    </button>
                </div>
            </div>

            <!-- Screen: Scope -->
            <div id="screenScope" class="screen">
                <div class="info-badge">
                    <span class="badge-icon">üìä</span>
                    <span>–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –æ—Ç—á—ë—Ç</span>
                </div>
                
                <h2 class="screen-title">–í—ã–±–µ—Ä–∏—Ç–µ –æ–±—ä–µ–∫—Ç –æ—Ç—á—ë—Ç–∞</h2>
                
                <div class="option-cards">
                    <button class="option-card" onclick="selectScope('slujba', 'üè¢ –°–ª—É–∂–±–∞')">
                        <div class="option-icon">üè¢</div>
                        <div class="option-content">
                            <h3>–°–ª—É–∂–±–∞</h3>
                            <p>–û—Ç—á—ë—Ç –ø–æ —Å–ª—É–∂–±–µ</p>
                        </div>
                        <div class="option-check"></div>
                    </button>
                    
                    <button class="option-card" onclick="selectScope('group', 'üë• –ì—Ä—É–ø–ø–∞')">
                        <div class="option-icon">üë•</div>
                        <div class="option-content">
                            <h3>–ì—Ä—É–ø–ø–∞</h3>
                            <p>–û—Ç—á—ë—Ç –ø–æ –≥—Ä—É–ø–ø–µ</p>
                        </div>
                        <div class="option-check"></div>
                    </button>
                </div>
            </div>

            <!-- Screen: Period -->
            <div id="screenPeriod" class="screen">
                <div class="breadcrumb">
                    <span class="badge-icon">üìä</span>
                    <span>–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π</span>
                    <span class="breadcrumb-sep">‚Ä∫</span>
                    <span id="scopeBreadcrumb">–°–ª—É–∂–±–∞</span>
                </div>
                
                <h2 class="screen-title">–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥</h2>
                
                <div class="option-cards">
                    <button class="option-card" onclick="selectPeriod('date')">
                        <div class="option-icon">üìÖ</div>
                        <div class="option-content">
                            <h3>–î–∞—Ç–∞</h3>
                            <p>–û—Ç—á—ë—Ç –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É</p>
                        </div>
                        <div class="option-arrow">‚Ä∫</div>
                    </button>
                    
                    <button class="option-card" onclick="selectPeriod('month')">
                        <div class="option-icon">üóì</div>
                        <div class="option-content">
                            <h3>–ú–µ—Å—è—Ü</h3>
                            <p>–ú–µ—Å—è—á–Ω—ã–π –æ—Ç—á—ë—Ç</p>
                        </div>
                        <div class="option-arrow">‚Ä∫</div>
                    </button>
                    
                    <button class="option-card" onclick="showScreen('screenQuarter')">
                        <div class="option-icon">üìÜ</div>
                        <div class="option-content">
                            <h3>–ö–≤–∞—Ä—Ç–∞–ª—å–Ω—ã–π</h3>
                            <p>–û—Ç—á—ë—Ç –ø–æ –∫–≤–∞—Ä—Ç–∞–ª–∞–º</p>
                        </div>
                        <div class="option-arrow">‚Ä∫</div>
                    </button>
                    
                    <button class="option-card" onclick="showScreen('screenYear')">
                        <div class="option-icon">üìà</div>
                        <div class="option-content">
                            <h3>–ì–æ–¥–æ–≤–æ–π</h3>
                            <p>–ì–æ–¥–æ–≤–æ–π –æ—Ç—á—ë—Ç</p>
                        </div>
                        <div class="option-arrow">‚Ä∫</div>
                    </button>
                </div>
            </div>

            <!-- Screen: Quarter Detail -->
            <div id="screenQuarter" class="screen">
                <h2 class="screen-title">–ö–≤–∞—Ä—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç</h2>
                <p class="screen-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏</p>
                
                <div class="option-cards">
                    <button class="option-card" onclick="selectPeriod('quarter', 'by_month')">
                        <div class="option-icon">üìä</div>
                        <div class="option-content">
                            <h3>–ü–æ –º–µ—Å—è—Ü–∞–º</h3>
                            <p>–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –º–µ—Å—è—Ü–∞–º –≤ –∫–≤–∞—Ä—Ç–∞–ª–µ</p>
                        </div>
                        <div class="option-arrow">‚Ä∫</div>
                    </button>
                    
                    <button class="option-card" onclick="selectPeriod('quarter', 'by_quarter')">
                        <div class="option-icon">üìà</div>
                        <div class="option-content">
                            <h3>–ü–æ –∫–≤–∞—Ä—Ç–∞–ª–∞–º</h3>
                            <p>Q1, Q2, Q3, Q4</p>
                        </div>
                        <div class="option-arrow">‚Ä∫</div>
                    </button>
                </div>
            </div>

            <!-- Screen: Year Detail -->
            <div id="screenYear" class="screen">
                <h2 class="screen-title">–ì–æ–¥–æ–≤–æ–π –æ—Ç—á—ë—Ç</h2>
                <p class="screen-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏</p>
                
                <div class="option-cards">
                    <button class="option-card" onclick="selectPeriod('year', 'by_month')">
                        <div class="option-icon">üìä</div>
                        <div class="option-content">
                            <h3>–ü–æ –º–µ—Å—è—Ü–∞–º</h3>
                            <p>–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –º–µ—Å—è—Ü–∞–º –≥–æ–¥–∞</p>
                        </div>
                        <div class="option-arrow">‚Ä∫</div>
                    </button>
                    
                    <button class="option-card" onclick="selectPeriod('year', 'by_quarter')">
                        <div class="option-icon">üìà</div>
                        <div class="option-content">
                            <h3>–ü–æ –∫–≤–∞—Ä—Ç–∞–ª–∞–º</h3>
                            <p>Q1, Q2, Q3, Q4</p>
                        </div>
                        <div class="option-arrow">‚Ä∫</div>
                    </button>
                    
                    <button class="option-card" onclick="selectPeriod('year', 'total')">
                        <div class="option-icon">üìã</div>
                        <div class="option-content">
                            <h3>–ò—Ç–æ–≥–æ–≤—ã–π</h3>
                            <p>–°–≤–æ–¥–Ω—ã–π –≥–æ–¥–æ–≤–æ–π –æ—Ç—á—ë—Ç</p>
                        </div>
                        <div class="option-arrow">‚Ä∫</div>
                    </button>
                </div>
            </div>

            <!-- Screen: Generating -->
            <div id="screenGenerating" class="screen">
                <div class="generating-animation">
                    <div class="generating-spinner"></div>
                    <div class="generating-icon">üìä</div>
                </div>
                <h2 class="screen-title">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞</h2>
                <p class="screen-subtitle">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ...</p>
                <div id="generatingProgress" class="progress-text"></div>
            </div>

            <!-- Screen: Success -->
            <div id="screenSuccess" class="screen">
                <div class="success-animation">
                    <div class="success-checkmark">
                        <svg width="80" height="80" viewBox="0 0 80 80">
                            <circle cx="40" cy="40" r="35" fill="#4CAF50"/>
                            <path d="M25 40 L35 50 L55 30" stroke="white" stroke-width="4" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                </div>
                <h2 class="screen-title">–û—Ç—á—ë—Ç –≥–æ—Ç–æ–≤!</h2>
                <p class="screen-subtitle">–§–∞–π–ª —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω</p>
                
                <div id="reportInfo" class="report-info"></div>
                
                <div class="action-buttons">
                    <button id="downloadBtn" class="btn btn-primary btn-large">
                        <span class="btn-icon">üì•</span>
                        –°–∫–∞—á–∞—Ç—å –æ—Ç—á—ë—Ç
                    </button>
                    <button onclick="showScreen('screenStart')" class="btn btn-secondary">
                        –ù–æ–≤—ã–π –æ—Ç—á—ë—Ç
                    </button>
                </div>
            </div>

            <!-- Screen: Upload -->
            <div id="screenUpload" class="screen">
                <div class="upload-section">
                    <div class="upload-icon">üì§</div>
                    <h2 class="screen-title">–ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç—á—ë—Ç–∞</h2>
                    <p class="screen-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ XLSX —Ñ–∞–π–ª –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏</p>
                    
                    <div class="file-upload-area" id="dropArea">
                        <input type="file" id="fileInput" accept=".xlsx,.xls" style="display: none;">
                        <div class="upload-placeholder">
                            <div class="upload-placeholder-icon">üìÑ</div>
                            <p>–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞</p>
                            <span class="upload-hint">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è: XLSX, XLS</span>
                        </div>
                    </div>
                    
                    <div id="uploadedFileInfo" class="uploaded-file-info" style="display: none;">
                        <div class="file-info-icon">üìÑ</div>
                        <div class="file-info-content">
                            <div class="file-info-name"></div>
                            <div class="file-info-size"></div>
                        </div>
                        <button class="file-remove-btn" onclick="removeFile()">‚úï</button>
                    </div>
                    
                    <button id="uploadBtn" class="btn btn-primary btn-large" style="display: none;" onclick="uploadFile()">
                        <span class="btn-icon">üì§</span>
                        –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
                    </button>
                </div>
            </div>

        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-text">
                –°–∏—Å—Ç–µ–º–∞ –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç–∏ v1.0
            </div>
        </footer>

    </div>

    <!-- Scripts -->
    <script src="app.js"></script>
</body>
</html>
